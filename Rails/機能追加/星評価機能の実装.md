# å®Œæˆå›³
[![Image from Gyazo](https://i.gyazo.com/54beb2cd05a7253d240d6cc5c5ac19ae.gif)](https://gyazo.com/54beb2cd05a7253d240d6cc5c5ac19ae)

# Step 0 äº‹å‰ã«ã‚„ã£ã¦ãŠãã“ã¨

```markdown
$ rails g controller books index new 
$ rails g model Book title:string learn:text about:text category:string overall:integer 
$ rails db:migrate
```

ç§ã®å ´åˆã€

`overall:integer` ä»¥å¤–ã¯æ—¢ã«ä½œã£ã¦ã„ãŸã®ã§ã€

[ã‚«ãƒ©ãƒ ã®è¿½åŠ ã¨å‰Šé™¤ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã™ã‚‹ã®è¨˜äº‹](https://qiita.com/azusanakano/items/a2847e4e582b9a627e3a)ã‚’å‚è€ƒã«

ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã™ã‚‹å½¢ã§ä½œæˆï¼

```ruby
private
  def book_params
    params.require(:book).permit(:title, :learn, :about, :category, :overrall)
```

â†‘ã“ã®ã‚ˆã†ã«book_paramsã«overallã‚’è¿½åŠ ã€‚



# Step1  `index.html.erb`ã‚’ç·¨é›†ã™ã‚‹

```ruby
<div>
<h2>ç·åˆè©•ä¾¡ï¼š
<span class="star-rating">
   <span class="star-rating-front" style="width: <%= getPercent(t.overall) %>%;">â˜…â˜…â˜…â˜…â˜…</span>
   <span class="star-rating-back">â˜…â˜…â˜…â˜…â˜…</span>
</span> 
</h2>
</div>
```

â†‘ ç·åˆè©•ä¾¡ã®â˜†ã®éƒ¨åˆ†ã«ãªã‚‹ã€‚

# Stepï¼’ books_helper.rbã‚’ç·¨é›†ã™ã‚‹

```ruby
def getPercent(number) 
   if number.present?
     calPercent = number/5.to_f * 100
     percent = calPercent.round
     #â†‘CSSã¯å°æ•°ãŒå«ã¾ã‚Œã‚‹ã¨ã€widthã®å¹…ã‚’æŒ‡å®šã§ããªã„ã®ã§å››æ¨äº”å…¥ã—ã¦æ•´æ•°åŒ–ã—ã¾ã™ï¼
     return percent.to_s
   else
     return 0
   end
 end
```

ï¼“è¡Œç›®ã«ã‚ã‚‹`calPercent = number/5.to_f * 100`ã®`number/5` ã®éƒ¨åˆ†ã‚’`number/10`ã«å¤‰æ›´ã™ã‚‹ã¨10æ®µéšè©•ä¾¡ã«å¤‰ãˆã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹â­•

ä»Šå›ã¯5æ®µéšè©•ä¾¡ã§å……åˆ†ãªã®ã§ã“ã®ã¾ã¾ã§ï¼

# Step3 new.html.erbã‚’ç·¨é›†ã™ã‚‹

```ruby
<h5>ç·åˆè©•ä¾¡</h5>
   <div class="post_form">
    <%= f.radio_button :overall, 5 ,id: 'star1'%>
    <label for="star1"><span class="text">æœ€é«˜</span>â˜…</label>

    <%= f.radio_button :overall, 4 ,id: 'star2'%>
    <label for="star2"><span class="text">è‰¯ã„</span>â˜…</label>

    <%= f.radio_button :overall, 3 ,id: 'star3'%>
    <label for="star3"><span class="text">æ™®é€š</span>â˜…</label>

    <%= f.radio_button :overall, 2 ,id: 'star4'%>
    <label for="star4"><span class="text">æ‚ªã„</span>â˜…</label>

    <%= f.radio_button :overall, 1 ,id: 'star5'%>
    <label for="star5"><span class="text">æœ€æ‚ª</span>â˜…</label>
 </div>
```

è‡ªåˆ†ãŒæ˜Ÿè©•ä¾¡ã‚’å…¥ã‚ŒãŸã„ãªã£ã¦ã„ã†æ‰€ã«ã€å…¥ã‚Œè¾¼ã‚€ã€‚


[![Image from Gyazo](https://i.gyazo.com/6ccb729d50ba50ed40a43ebf75984a96.gif)](https://gyazo.com/6ccb729d50ba50ed40a43ebf75984a96)
ã“ã‚“ãªæ„Ÿã˜ã«å¤‰ãˆã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã€‚

# Step4 books.cssã‚’ç·¨é›†ã™ã‚‹

```ruby
.post_form{
    display: flex;
    flex-direction: row-reverse;
    justify-content: flex-end;
  }
  .post_form input[type='radio']{
    display: none;
  }
  .post_form label{
    position: relative;
    padding: 10px 10px 0;
    color: gray;
    cursor: pointer;
    font-size: 30px; /*æ˜Ÿã®å¤§ãã•ã‚’å¤‰æ›´*/
  }
  .post_form label .text{
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    text-align: center;
    font-size: 9px; /*æ˜Ÿã®ä¸Šã®èª¬æ˜æ›¸ãã®å¤§ãã•ã‚’å¤‰æ›´*/
    color: gray;
  }
  .post_form label:hover,
  .post_form label:hover ~ label,
  .post_form input[type='radio']:checked ~ label{
    color: #ffcc00;
  }

/*ã€€ä»¥ä¸‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã®æ˜Ÿç”¨ã®CSSã€€*/

  .star-rating {
    position: relative;
    display: inline-block;
    width: 5em;
    height: 1em;
    font-size: 25px;
  }
  .star-rating-front {
    display: inline-block;
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
    color: #ffcc33;
  }
  .star-rating-back {
    display: inline-block;
    color: #ccc;

  }
```

â˜†ç”¨ã®CSSã€‚

# é€”ä¸­è§£èª¬

```ruby
 .post_form input[type='radio']{
    display: none;
```

å‹˜ãŒã„ã„æ–¹ã¯ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã‚ã‹ã‚‹ã‹ã‚‚ã€‚

â˜†ã®æ­£ä½“ã¯ãªã‚“ã¨ã€ã€ã€ã€

ğŸ”˜ï¼ˆãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ï¼‰ï¼

ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’CSSã§è¦‹ãˆãªãã—ã¦ã€ãã®ä¸Šã«â˜†ã‚’ã‹ã¶ã›ã¦ã„ã‚‹ã¨ã„ã†ä»•çµ„ã¿ğŸ¥º

1ã¤ã®æ˜Ÿã‚’ä½œã‚‹ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ã¯ã€

```ruby
<%= f.radio_button :ã‚«ãƒ©ãƒ å, é€ã‚ŠãŸã„æ•°å­—(value) ,id: 'starç•ªå·'%>
<label for="starç•ªå·"><span class="text">æ˜Ÿã®ä¸Šã«è¡¨ç¤ºã—ãŸã„æ–‡</span>â˜…</label>
```

ã¨ãªã‚‹ã€‚

ã¾ã‚é›£ã—ã„ã®ã§ã‚¹ãƒ«ãƒ¼ã§ğŸš—

```ruby
 .post_form label:hover,
  .post_form label:hover ~ label,
  .post_form input[type='radio']:checked ~ label{
    color: #ffcc00;
```

ã“ã®éƒ¨åˆ†ã®`color: #ffcc00;`ã“ã“ã¯é»„è‰²ã€‚

ã¦ã“ã¨ã¯ã€

ã“ã®éƒ¨åˆ†ã§ğŸŒŸã«è‰²ã‚’ä»˜ã‘ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

æ­£ç¢ºã«ã„ã†ã¨ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã€ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã€

`[type='radio']:checked`ã®éƒ¨åˆ†ã§ğŸ”˜ã§ãƒã‚§ãƒƒã‚¯ã—ãŸã‚„ã¤ã ã‘é»„è‰²ã«å¡—ã‚Šã¾ã£ã›ãƒ¼

ã¨ã„ã£ãŸã“ã¨ã‚’ã—ã¦ã„ã‚‹ã€‚

```ruby
.post_form{
    display: flex;
    flex-direction: row-reverse;
    justify-content: flex-end;
  }
```

ãã‚Œã§ã¯ã€1è¡Œç›®ã®ãƒ–ãƒ­ãƒƒã‚¯ã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã«æˆ»ã‚‹ã€‚

ã“ã®ã‚³ãƒ¼ãƒ‰ã®`flex-direction: row-reverse;`ã®éƒ¨åˆ†ã«ç€ç›®ã€‚

[![Image from Gyazo](https://i.gyazo.com/54beb2cd05a7253d240d6cc5c5ac19ae.gif)](https://gyazo.com/54beb2cd05a7253d240d6cc5c5ac19ae)

ä»Šå›ã¯ã€å³ã«ã„ã‘ã°è¡Œãã»ã©è©•ä¾¡ãŒè‰¯ã„ã¨ã„ã†æ„Ÿã˜ã«å®Ÿè£…ã‚’ã—ãŸã„ã®ã§ã€

`flex-direction: row-reverse;`ã§è¡¨ç¤ºã‚’åè»¢ã•ã›ã¦ã„ã‚‹ã€‚

# å‚è€ƒã‚µã‚¤ãƒˆ

ã€Œå£ã‚³ãƒŸã‚µã‚¤ãƒˆã®æ˜Ÿ(â˜…â˜…â˜…â˜†â˜†)ã‚’CSSã ã‘ã§å®Ÿè£…ã—ã¦ã¿ãŸã€[https://qiita.com/morikooooo/items/1c8055678a76d64587d9](https://qiita.com/morikooooo/items/1c8055678a76d64587d9)

ã€ŒCSSã§æ˜Ÿã®ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è©•ä¾¡ã‚’0.0ã€œ5.0ã§è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒ¢ã€[https://cortyuming.hateblo.jp/entry/2017/03/22/131457](https://cortyuming.hateblo.jp/entry/2017/03/22/131457)
