## リクエストからレスポンスまでの流れについて(GET編)

### 状況

とあるSNSアプリがあります。ユーザーの一覧ページがブラウザに表示されるまでの流れを説明しましょう。
<br>

1. `/users`にアクセスすると、`GET`メソッドがWebブラウザに送られる。
2. ブラウザからのリクエストを受け取った`コントローラ`が、`モデル`に（ユーザー一覧）のデータを持ってくるように要求する。
3. モデルが取ってきたデータを`コントローラ`が受け取り、`ビュー`にデータを渡す。
4. そして`ビュー`が受け取ったデータ（ユーザー一覧ページ）を画面上に表示する。
<br>

`route.rb`ファイルは、特定のコントローラ内アクションへ割り当てる機能がある。
<br>

## **リクエストからレスポンスまでの流れについて(POST編)**

### 状況

とあるタスク管理アプリがあります。タスクを新規作成するときの流れを説明してください。
<br>

### 新規作成ページを表示する

<br>
1. `/tasks/new`にアクセスすると、`GET`メソッドがWebブラウザに送られる。

2. ブラウザからのリクエストを受け取った`コントローラ`が、`モデル`に（タスクの新規作成）のデータを持ってくるように要求する。

3. モデルが取ってきたデータをコントローラが受け取り、`ビュー`にデータを渡す。

4. そしてビューが受け取ったデータ（タスクの新規作成）を画面上に表示する。
<br>
[![Image from Gyazo](https://i.gyazo.com/e52e971085f60d5d6aefeae652567966.gif)](https://gyazo.com/e52e971085f60d5d6aefeae652567966)
<br>
## タスク名(name)を入力する

``app/views/tasks/new.html.slimがnew`アクション`に対応する。

`form_with`という`メソッド`を利用し、登録フォームを表示させる。

フォームの内部には、.form-groupというbootstrapで用意しているデザイン要素が配置されている。

## 作成ボタンを押す

タスクの作成ボタンを押すと、`POST`メソッドがWebブラウザに送られる。
<br>
[![Image from Gyazo](https://i.gyazo.com/7f7c43c9dd048788ad02bb759681afd2.gif)](https://gyazo.com/7f7c43c9dd048788ad02bb759681afd2)
## タスクの詳細画面に遷移する

【流れ】

ユーザーは一覧画面から興味のあるタスクを探し、タスクの名称をクリックすると詳細画面に遷移する。

【手順】

1.**クリックするとtasks/[タスクのID]という詳細表示のURLに遷移するプログラムを書く**
<br>

`app/views/tasks/index.html.slim` で、

```ruby
td= link_to task.name, task
```

とコードを書く。

2.**指定されたタスクを詳細画面で取得する**

TasksControllerのshowアクションに

```ruby
def show
  @task = Task.find(params[:id])
end
```

とコードを書く。
<br>
こうすることでfindというオブジェクトが詳細画面に表示するためのTaskオブジェクトを取得する。findはidによってモデルオブジェクトに対応するレコードをデータベースから検索し、引数として`params[:id]`を渡す。
<br>
`params[:id]`にはリクエストパラメータ（params）から得られる`URL"tasks/[タスクのid]"`の`[タスクのid]`の部分が格納されている。
<br>

ここで取得されたTaskオブジェクトは、`@task`というインスタンス変数に代入して`ビュー`に伝えられる。
